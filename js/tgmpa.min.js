!function(e){"use strict";var t,r,a,n,i,o,l,s,p,c,h,u,d,m,g,_=e(".version-number"),f=e(".release-date");function v(e){return e.match(/[0-9\.]+/)?e.replace(/^(?:v)?([0-9\.]+)(?:-(?:alpha|beta|rc[0-9-]?))?.*$/i,"$1"):""}function b(e){return e.match(/[0-9]+\.[0-9]+\.[0-9]+/)?e.replace(/^.*?([0-9]+\.[0-9]+\.[0-9]+\-(?:alpha|beta|rc[0-9-]?)).*$/i,"$1"):""}function $(e){return e.match(/alpha|beta|rc[0-9-]?/i)?e.replace(/^(?:v)?(?:[0-9\.]+)(?:-(alpha|beta|rc[0-9-]?))?.*$/i,"$1").toLowerCase():""}function y(e){var t,r;return t=["January","February","March","April","May","June","July","August","September","October","November","December"],r="",e.name.match(/\([0-9]{4}-[0-9]{2}-[0-9]{2}\)/)&&(r=e.name.replace(/^[^\(]+\(([0-9]{4}-[0-9]{2}-[0-9]{2})\).*$/,"$1")),""===r&&e.published_at&&(r=e.published_at.substr(0,10)),t[(r=new Date(r)).getUTCMonth()]+" "+r.getUTCDate()+", "+r.getUTCFullYear()}function w(e,t){l.hide(),p.fadeTo(200,1).attr("aria-hidden","false"),c.addClass(t).html(e),"error"===t&&h.fadeTo(0,1).attr("aria-hidden","false"),"success"===t&&p.delay(5e3).fadeTo(1200,0).attr("aria-hidden","true")}function x(e,t,r,a){var n=" for "+r.replace(/-/g," ")+" "+t;return"wporg"===a?n+=" for publication on WordPress.org":"themeforest"===a&&(n+=" for publication on ThemeForest"),e.replace(/(\* @version\s+[0-9\.]+)([\r\n]+)/,"$1"+n+"$2")}function T(e,t,r){var a,n,i;return e=(e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")).replace(/\\-/g,"-"),t="$1"+t+"$2",a=new RegExp("((?:_[_enx]|_[en]x|_n[x]?_noop|__ngettext_noop|translate_nooped_plural)\\((?:[^\\)]+%s\\)){2}[^\\)]+,\\s+')"+e+"('\\s+\\))","g"),n=new RegExp("((?:_[_enx]|_[en]x|_n[x]?_noop|__ngettext_noop|translate_nooped_plural)\\([^\\)]+?%1\\$s \\(%2\\$d/%3\\$d\\)',\\s+')"+e+"('\\s+\\))","g"),i=new RegExp("((?:_[_enx]|_[en]x|_n[x]?_noop|__ngettext_noop|translate_nooped_plural)\\((?:\\s+\\/\\* translators: [^*]+)?[^\\)]+,\\s+')"+e+"('\\s+\\))","g"),r=(r=(r=r.replace(a,t)).replace(n,t)).replace(i,t)}r=e(".latest-zip"),a=e(".latest-tar"),n=e("#releases-table"),i=e("#release-notes"),o=n.find("tbody"),l=e("#spinner"),s=e("#tgmpa-form-publish"),p=e(".generator-feedback"),c=e("#generator-feedback"),h=e("#report-generator-error"),u="",window.location.hash&&("#dependencies"===window.location.hash?window.location.hash="#requirements":"#download"!==window.location.hash&&"#installation"!==window.location.hash&&"#screenshots"!==window.location.hash&&"#authors"!==window.location.hash||(t=window.location.hash.split("#"),window.location.replace(siteurl+"/"+t))),ghreleases&&ghreleases.length&&(r.length||a.length||_.length||o.length)?(ghreleases.sort(function(e,t){var r,a,n,i;return r=v(e.tag_name),a=v(t.tag_name),n=$(e.tag_name),i=$(t.tag_name),r<a?-1:r>a?1:n<i?-1:n>i?1:0}),d=ghreleases.pop(),_.length&&d.name&&(""===(u=b(d.name))&&d.tag_name&&(u=b(d.tag_name)),""!==u&&_.html(u)),r.length&&d.zipball_url&&r.attr("href",d.zipball_url),a.length&&d.tarball_url&&a.attr("href",d.tarball_url),f.length&&(m=y(d))&&f.html(", released at "+m),o.length&&o.html(function(e){var t,r,a,n="";for(ghreleases.reverse(),r=Math.min(e,ghreleases.length),t=0;t<r;t++)a=y(ghreleases[t]),n+=["<tr><td>",ghreleases[t].tag_name,"</td><td>",a,'</td><td><a href="',ghreleases[t].zipball_url,'">zipball</a></td><td><a href="',ghreleases[t].tarball_url,'">tarball</a></td></tr>'].join("");return n}(5)),d.body.length?(marked.setOptions({renderer:new marked.Renderer,gfm:!0,tables:!0,breaks:!0,pedantic:!1,sanitize:!0,smartLists:!0,smartypants:!0}),(g=ghreleases.shift()).body.length&&i.prepend(marked(g.body)).prepend("<h5>Version "+g.name+"</h5>"),i.prepend(marked(d.body)).prepend("<h5>Version "+d.name+"</h5>"),e("#no-release-notes").remove()):i.remove()):(n.remove(),i.remove()),e("#tgmpa-text-domain").on("blur",function(){var t=e("#tgmpa-prefix"),r=e("#tgmpa-name");""===t.val()&&t.val(e(this).val().replace(/[ -]/g,"_")),""===r.val()&&r.val(e(this).val().replace(/[_-]/g," ").toTitleCase())}),e('input:radio[name="tgmpa-flavor"]').on("change",function(){var t=e(this).val();"parent-theme"===t||"child-theme"===t?s.fadeTo(400,1).attr("aria-hidden","false"):s.fadeTo(400,0).attr("aria-hidden","true")}),e('input:radio[name="tgmpa-flavor"]').is(":checked")?e('input:radio[name="tgmpa-flavor"]:checked').trigger("change"):s.fadeTo(400,0).attr("aria-hidden","true"),e("#generator-form").on("submit",function(t){var r,a,n,i,o,s;return t.preventDefault(),"1"===e('input[name="tgmpa_generate"]').val()&&(l.show(),p.fadeTo(0,0).attr("aria-hidden","true"),c.removeClass().html(""),h.fadeTo(0,0).attr("aria-hidden","true"),r="TGM-Plugin-Activation-"+u,e('input:radio[name="tgmpa-flavor"]').is(":checked")&&(o=e('input:radio[name="tgmpa-flavor"]:checked').val()),a=e("#tgmpa-text-domain").val(),void 0!==(n=e("#tgmpa-prefix").val())&&""!==n||(n=a),void 0!==(i=e("#tgmpa-name").val())&&""!==i||(i=a.replace(/-/g," ").toTitleCase()),s="other",e('input:radio[name="tgmpa-publish"]').is(":checked")&&(s=e('input:radio[name="tgmpa-publish"]:checked').val()),n=n.replace(/-/g,"_"),-1===function(e){return e.search(/^[a-z0-9_-]+$/i)}(a)||-1===function(e){return e.search(/^[a-z0-9_]+$/i)}(n)||-1===function(e){return e.search(/^[a-z0-9 _-]+$/i)}(i)||-1===function(t){var r=new Array("parent-theme","child-theme","plugin");return e.inArray(t,r)}(o)||-1===function(t){var r=new Array("wporg","themeforest","other");return e.inArray(t,r)}(s)?(w("Invalid input received.","error"),!1):(JSZipUtils.getBinaryContent("../releases/"+r+".zip",function(e,t){if(e)return w("Failed to retrieve TGMPA: "+e,"error"),!1;try{JSZip.loadAsync(t).then(function(e){var t,l;return t=e.file(r+"/example.php").async("string").then(function(e){return e=(e=(e=function(e,t){var r=/('source'\s+=>\s+)get_stylesheet_directory\(\)([^,]+,)/;return"parent-theme"===t?e.replace(r,"$1get_template_directory()$2"):"plugin"===t?e.replace(r,"$1dirname( __FILE__ )$2"):e}(e=function(e,t){var r="require_once dirname( __FILE__ ) . '/class-";return"parent-theme"===t?e.replace(r,"require_once get_template_directory() . '/path/to/class-"):"child-theme"===t?e.replace(r,"require_once get_stylesheet_directory() . '/path/to/class-"):e}(e=T("theme-slug",a,e),o),o)).replace(/([ '"])my_theme_register_required_plugins(['"\(])/g,"$1"+n+"_register_required_plugins$2")).replace(/('id'\s+=>\s+')tgmpa(',)/,"$1"+a+"$2"),"plugin"===o?e=function(e){return e=(e=e.replace(/('parent_slug'\s+=>\s+')themes.php(',)/,"$1plugins.php$2")).replace(/('capability'\s+=>\s+')edit_theme_options(',)/,"$1manage_options$2")}(e):"wporg"!==s&&"themeforest"!==s||"parent-theme"!==o&&"child-theme"!==o||(e=function(e){return e.replace(/(\t)+'parent_slug'[ ]+=> '[^']*',.*\s+'capability'[ ]+=> '[^']*',[ ]+.*[\n\r]*/,"")}(e)),e=x(e,i,o,s)}),e.file(r+"/example.php",t),"other"===s||"parent-theme"!==o&&"child-theme"!==o||(l=e.file(r+"/class-tgm-plugin-activation.php").async("string").then(function(e){return"themeforest"===s&&(e=function(e){var t;return t=/(protected function add_admin_menu\([^\)]*\) \{\s+)(?:[^\}]+\}){3}(\s+})/,e.replace(t,"$1$this->page_hook = add_theme_page( $args['page_title'], $args['menu_title'], $args['capability'], $args['menu_slug'], $args['function'] );$2")}(e)),"wporg"===s&&(e=function(e){var t,r,a,n;return t=/[\t]+\/\*(?:[^\*]+\*)+\/\s+add_action\( 'init', array\( \$this, 'load_textdomain' \)[^)]*\);\s+add_filter\( 'load_textdomain_mofile'[^\r\n]+/,r=/[\t]+\/[\*]{2}(?:[^*]+\*)+\/\s+public function load_textdomain\(\) \{(?:[^\}]+\}){4}/,a=/[\t]+\/[\*]{2}(?:[^*]+\*)+\/\s+public function correct_plugin_mofile\([^\)]*\) \{(?:[^\}]+\}){4}/,n=/[\t]+\/[\*]{2}(?:[^*]+\*)+\/\s+public function overload_textdomain_mofile\([^\)]*\) \{(?:[^\}]+\}){5}/,e=(e=(e=(e=e.replace(t,"")).replace(r,"")).replace(a,"")).replace(n,"")}(e),e=T("tgmpa",a,e)),e=x(e,i,o,s)}),e.file(r+"/class-tgm-plugin-activation.php",l),"wporg"===s&&e.remove(r+"/languages")),e.remove(r+"/.editorconfig"),e.remove(r+"/.jscsrc"),e.remove(r+"/.jshintignore"),e.remove(r+"/.scrutinizer.yml"),e.remove(r+"/.travis.yml"),e.remove(r+"/composer.json"),e.remove(r+"/phpcs.xml"),e}).then(function(e){return JSZip.support.blob?e.generateAsync({type:"blob"}).then(function(e){saveAs(e,r+"-"+a+".zip"),w("Custom TGMPA succesfully created!","success")},function(e){w("Failed to generate Custom TGMPA file: "+e,"error")}):w("This browser is not supported.","warning"),!1})}catch(e){w(" "+e,"error")}}),void l.hide()))})}(jQuery);